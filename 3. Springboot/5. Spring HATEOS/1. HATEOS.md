# HATEOAS (Hypermedia as the Engine of Application State)

## Kirish
HATEOAS (Hypermedia as the Engine of Application State) — bu REST (Representational State Transfer) ilova arxitekturasining asosiy cheklovlaridan biri bo‘lib, uni boshqa tarmoq arxitekturalaridan ajratib turadi. HATEOAS yordamida mijoz tarmoq ilovasi bilan gipermedia (hyperlinklar va boshqa resurslar) orqali dinamik ravishda o‘zaro aloqa qiladi. REST mijoziga ilova yoki server bilan ishlash uchun oldindan ko‘p ma'lumot kerak emas, faqat gipermedia haqida umumiy tushuncha bo‘lsa kifoya.

## HATEOAS nima?
HATEOAS REST API’larida mijoz va server o‘rtasidagi o‘zaro aloqani gipermedia orqali boshqarish tamoyilidir. Mijoz serverdan qaytgan javobdagi havolalar (links) yordamida ilovaning keyingi holatlariga o‘tadi. Bu mijozning API bilan ishlash uchun oldindan belgilangan endpointlar yoki URL tuzilishlarini bilishini talab qilmaydi. HATEOAS API’ni veb-saytlarga o‘xshatadi: xuddi foydalanuvchi veb-saytda hyperlinklar orqali navigatsiya qilgani kabi, REST mijozlari ham server tomonidan taqdim etilgan havolalar orqali resurslarga kiradi.

### Asosiy tamoyillar
- **Dinamik navigatsiya**: Server javobida mijoz uchun mavjud bo‘lgan keyingi harakatlar uchun havolalar taqdim etiladi.
- **Mustaqillik**: Mijoz API’ning ichki tuzilishini bilishi shart emas, chunki barcha kerakli ma'lumotlar javobda mavjud.
- **O‘z-o‘zini tushuntiruvchi API**: API javoblari resurslar va ularga bog‘liq operatsiyalarni tavsiflaydi.

## HATEOAS qanday ishlaydi?
HATEOASga amal qilgan REST API javobi so‘ralgan ma'lumotlar bilan birga mijozning keyingi mumkin bo‘lgan harakatlari uchun havolalarni o‘z ichiga oladi. Quyida bir misol keltirilgan:

### So‘rov
```
GET /users/123
```

### Javob (JSON formatida)
```json
{
  "id": 123,
  "name": "Ali Valiyev",
  "email": "ali@example.com",
  "_links": {
    "self": { "href": "/users/123" },
    "posts": { "href": "/users/123/posts" },
    "update": { "href": "/users/123", "method": "PUT" },
    "delete": { "href": "/users/123", "method": "DELETE" }
  }
}
```

Yuqoridagi javobda:
- `"self"`: Joriy resursga havola.
- `"posts"`: Foydalanuvchining postlariga havola.
- `"update"` va `"delete"`: Foydalanuvchi ma'lumotlarini yangilash yoki o‘chirish uchun operatsiyalar.

Mijoz ushbu havolalardan foydalanib, keyingi so‘rovlarni amalga oshiradi, masalan, `/users/123/posts` orqali postlarni olishi mumkin.

## HATEOASning afzalliklari
1. **Mijozning mustaqilligi**:
   - Mijoz API’ning URL tuzilishini bilishi shart emas, chunki barcha kerakli havolalar server javobida taqdim etiladi.
   - API o‘zgarsa ham, mijoz faqat yangi havolalarga amal qiladi.
2. **Ilova holatini boshqarish**:
   - Mijoz ilova holatini serverdan kelgan gipermedia orqali boshqaradi.
3. **API evolyutsiyasi**:
   - Yangi funksiyalar yoki resurslar qo‘shilganda, mijoz ularni avtomatik ravishda “kashf qila oladi”.
4. **Standartlashtirish**:
   - API o‘z-o‘zini tushuntiruvchi bo‘lib, foydalanishni osonlashtiradi.

## HATEOASni amalga oshirishda ishlatiladigan formatlar
HATEOASni qo‘llab-quvvatlash uchun bir nechta standart formatlar mavjud:
1. **HAL (Hypertext Application Language)**:
   - JSON asosidagi format bo‘lib, `_links` ob‘yektida havolalarni taqdim etadi.
   - Misol:
     ```json
     {
       "data": { "id": 1, "name": "Mahsulot" },
       "_links": {
         "self": { "href": "/products/1" },
         "related": { "href": "/products/1/related" }
       }
     }
     ```
2. **JSON:API**:
   - Resurslar va havolalarni tuzilgan tarzda taqdim etadi.
   - Misol:
     ```json
     {
       "data": {
         "type": "users",
         "id": "123",
         "attributes": { "name": "Ali" },
         "links": { "self": "/users/123" }
       }
     }
     ```
3. **Siren yoki Collection+JSON**:
   - Qo‘shimcha moslashuvchanlik ta'minlaydigan JSON asosidagi formatlar.

## HATEOASni amalga oshirish (Spring misolida)
Spring Framework’da HATEOASni amalga oshirish uchun **Spring HATEOAS** kutubxonasi ishlatiladi. Quyida oddiy misol keltirilgan:

```java
import org.springframework.hateoas.EntityModel;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RestController;
import static org.springframework.hateoas.server.mvc.WebMvcLinkBuilder.*;

@RestController
public class UserController {

    @GetMapping("/users/{id}")
    public EntityModel<User> getUser(@PathVariable Long id) {
        User user = userService.findById(id);
        EntityModel<User> model = EntityModel.of(user);
        model.add(linkTo(methodOn(UserController.class).getUser(id)).withSelfRel());
        model.add(linkTo(methodOn(UserController.class).getUserPosts(id)).withRel("posts"));
        return model;
    }
}
```

Yuqoridagi kodda:
- `EntityModel` yordamida foydalanuvchi ma'lumotlari va unga tegishli havolalar qaytariladi.
- `linkTo` va `withRel` metodlari havolalarni dinamik tarzda yaratadi.

## HATEOASning qiyinchiliklari
1. **Murakkablik**:
   - API dizaynini murakkablashtiradi, chunki har bir javobda to‘g‘ri havolalarni taqdim etish kerak.
2. **Mijoz tarafidagi qo‘llab-quvvatlash**:
   - Mijoz dasturi havolalarni tahlil qila olishi kerak, bu esa ishlab chiqishni qiyinlashtiradi.
3. **Ishlash tezligi**:
   - Qo‘shimcha havolalar tarmoq so‘rovlarini ko‘paytirishi mumkin.

## HATEOASning RESTdagi o‘rni
HATEOAS REST arxitekturasining yetuklik modelida (Richardson Maturity Model) eng yuqori daraja (Level 3) sifatida qaraladi:
- **Level 0**: Oddiy HTTP so‘rovlari (RPC uslubidagi API’lar).
- **Level 1**: Resurslarga asoslangan API’lar (masalan, `/users/123`).
- **Level 2**: HTTP metodlari va holat kodlaridan foydalanish.
- **Level 3**: HATEOAS — gipermedia yordamida dinamik navigatsiya.

HATEOASsiz API RESTning to‘liq talablariga javob bermaydi, lekin amalda ko‘plab API’lar HATEOASni qo‘llamaydi, chunki u qo‘shimcha murakkablik keltirib chiqaradi.

## Xulosa
HATEOAS REST API’larini mustaqil, moslashuvchan va o‘z-o‘zini tushuntiruvchi qilishga xizmat qiladi. U mijozlarga server bilan dinamik ravishda o‘zaro aloqa qilish imkonini beradi, lekin amalga oshirishda qo‘shimcha harakat talab qiladi. Spring HATEOAS kabi kutubxonalar bu jarayonni soddalashtiradi. HATEOASni qo‘llash API’ning uzoq muddatli barqarorligi va evolyutsiyasi uchun foydali bo‘lishi mumkin.
